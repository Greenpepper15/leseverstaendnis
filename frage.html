<!DOCTYPE html>

<html>
<head>
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>
    <header>
       <h3 id="pageNum"> </h3> 
        <!-- <p id="pageNum">Umfage zum Thema Influences on textual parameters, Frage 1/8</p> -->
    </header>
      
    <div class="center">
       
                                                               
        <img alt ="Textbeispiel" id="text" ><br>
        <p class = "question" id="frage" >  </p>
        <form id="formText" action="https://send.pageclip.co/aQlCB42llkM5b7S4ZBcufO2vszmXLq6E/warum" class="pageclip-form" method="post">
            <!-- <label for="question">Platzhalter frage:</label><br> -->
                <input type="text" id="answer" name="answer"><br>
        
            <br><label for="knowFont" class ="knowFont">Sehen Sie die Schriftart regelmäßig?</label><br>
                <input type="checkbox" class="checkbox" id="know" name="knowfont" value="know" onclick="checkVisibility()" /> Ja <br/>
                <input type="checkbox" class="checkbox" id="unknown" name="knowfont" value="unknown" onclick="checkVisibility()" /> Nein <br/>
            
                <input type="hidden" id="custId" name="custId">
                <input type="hidden" id="fontId" name="fontId">
                <input type="hidden" id="reihenfolgeId" name="reihenfolgeId">
                <input type="hidden" id="readSpeed" name="readSpeed">
             
    </div> 
    <div id="rightid" class="right">
           <input class="button2" type="submit" onclick ="retId('custId','https://greenpepper15.github.io/leseverstaendnis/frage')" id="weiterid" value="Weiter">
        </form>
        <form id="readSpeed" class="readspeed" >   Welche Geschwindigkeit bevorzugen Sie? 
            <input type="checkbox" class="checkbox" id="ad" name="k" onclick="setSpeed('fast')"     /> schnell
            <input type="checkbox" class="checkbox" id="no" name="n" onclick="setSpeed('middle')"   /> mittel
            <input type="checkbox" class="checkbox" id="no" name="n" onclick="setSpeed('slow')"     /> langsam
        </form>  
    </div>                                                                 
       
   
    

    
<script src="//cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>
<script src="website.js"></script> 
<script src="https://s.pageclip.co/v1/pageclip.js" charset="utf-8"></script>
<script>
   function setSpeed(readSpeed){
        localStorage.setItem("readspeed", readSpeed);
        giveVisability('weiterid');
    }
    function checkVisibility(){
        if (document.getElementById('rightid').style.visibility == 'hidden') {
            giveVisability('weiterid');
        } 
    }
    removeVisability('weiterid');
    removeVisability("rightid");
    
     var remaingQuestions = JSON.parse(localStorage.getItem('frageSammlung')).Fragen;
     if (remaingQuestions.length == 9) {
        localStorage.setItem("farben_num","1");
        changeSite("https://greenpepper15.github.io/leseverstaendnis/farben");
     }
     var chosenQuest =  RanNumber(remaingQuestions);
     var prefix = remaingQuestions[chosenQuest];
     remaingQuestions.splice(chosenQuest, 1);
     var jso = {"Fragen" :  remaingQuestions};
     localStorage.setItem("frageSammlung",JSON.stringify(jso));
     var fontList = [prefix+"/"+ "Clarendon.png", prefix+"/"+ "Amador.png", prefix+"/"+ "CaflischScript.png", prefix+"/" + "MinionPro.png", prefix+"/" +"Protipo.png"];
     var imageNum = displayRanImage("text",fontList);
     removeVisability("formText");
     writeFormInputValue("fontId", fontList[imageNum]);

     var fragenNum = parseInt(localStorage.getItem("fragenCounter"));
     var time;   
     fetch("./" + prefix + "/" + prefix + ".json")
    .then(response => {
       return response.json();
    })
    .then(jsonData => {
     var readSpeed; 
     if (fragenNum == 1){
         readSpeed = "slow";
     } else if (fragenNum == 2){
        readSpeed = "middle";
     } else if (fragenNum == 3){
        readSpeed = "fast";
     } else {
        readSpeed = localStorage.getItem("readspeed");
     }      
     data = jsonData.f1;
     document.getElementById("frage").innerHTML = data;
     time = jsonData[readSpeed];
     if (fragenNum == 3) {
        setTimeout(() => {removeVisability('text');giveVisability('frage');giveVisability('formText'); giveVisability("rightid");},time);
      } else {
        setTimeout(() => {removeVisability('text');giveVisability('frage');giveVisability('formText');},time);
      }
      writeFormInputValue("readSpeed", time);
     });
      writeFormInputValue("reihenfolgeId", fragenNum);
      document.getElementById("pageNum").innerHTML = "Umfage zum Thema Influences on textual parameters, Frage " + fragenNum + "/8";
      localStorage.setItem("fragenCounter", (fragenNum + 1).toString());  
 </script>
 
</body>
</html>
